var fe=Object.defineProperty,ce=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var W=(e,t,l)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,p=(e,t)=>{for(var l in t||(t={}))Y.call(t,l)&&W(e,l,t[l]);if(O)for(var l of O(t))N.call(t,l)&&W(e,l,t[l]);return e},P=(e,t)=>ce(e,ve(t));var G=(e,t)=>{var l={};for(var o in e)Y.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(e!=null&&O)for(var o of O(e))t.indexOf(o)<0&&N.call(e,o)&&(l[o]=e[o]);return l};import{k as R,m as _,u as I}from"./render-04a01df5.mjs";import{o as ge}from"./keyboard-b81851fc.mjs";import{t as $}from"./use-id-b6e0887a.mjs";import{W as me,g as B}from"./use-focus-trap-0dc66c51.mjs";import{e as Z}from"./owner-f2792c55.mjs";import{h,l as M,s as z,m as H,n as ee,p as te,g as k,i as c,q as he,k as S}from"./entry-fba3770b.mjs";import{R as le,L as ye,P as L}from"./portal-8f9b8785.mjs";import{useDescriptions as De,Description as be}from"./description-51b8c232.mjs";import{t as Se}from"./dom-0d1fce75.mjs";import{p as we,l as J}from"./open-closed-5740cd5c.mjs";import{g as Re,p as $e}from"./use-outside-click-30e9fbf7.mjs";import{r as ke}from"./use-event-listener-442b8502.mjs";import"./focus-management-c0b49fb2.mjs";let K="body > *",b=new Set,m=new Map;function Q(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function X(e){let t=m.get(e);!t||(t["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}function Ae(e,t=h(!0)){M(l=>{if(!t.value||!e.value)return;let o=e.value,n=Z(o);if(n){b.add(o);for(let a of m.keys())a.contains(o)&&(X(a),m.delete(a));n.querySelectorAll(K).forEach(a=>{if(a instanceof HTMLElement){for(let r of b)if(a.contains(r))return;b.size===1&&(m.set(a,{"aria-hidden":a.getAttribute("aria-hidden"),inert:a.inert}),Q(a))}}),l(()=>{if(b.delete(o),b.size>0)n.querySelectorAll(K).forEach(a=>{if(a instanceof HTMLElement&&!m.has(a)){for(let r of b)if(a.contains(r))return;m.set(a,{"aria-hidden":a.getAttribute("aria-hidden"),inert:a.inert}),Q(a)}});else for(let a of m.keys())X(a),m.delete(a)})}})}let ae=Symbol("StackContext");var q=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(q||{});function Ce(){return z(ae,()=>{})}function Ee({type:e,element:t,onUpdate:l}){let o=Ce();function n(...a){l==null||l(...a),o(...a)}H(()=>{n(0,e,t),ee(()=>{n(1,e,t)})}),te(ae,n)}var Te=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Te||{});let U=Symbol("DialogContext");function A(e){let t=z(U,null);if(t===null){let l=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,A),l}return t}let x="DC8F892D-2EBD-447C-A4C8-A03058436FF4",We=k({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:x},initialFocus:{type:Object,default:null}},emits:{close:e=>!0},setup(e,{emit:t,attrs:l,slots:o,expose:n}){var a;let r=h(0),w=we(),D=c(()=>e.open===x&&w!==null?I(w.value,{[J.Open]:!0,[J.Closed]:!1}):e.open),F=h(new Set),f=h(null),j=c(()=>Z(f));if(n({el:f,$el:f}),!(e.open!==x||w!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof D.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${D.value===x?void 0:e.open}`);let v=c(()=>D.value?0:1),V=c(()=>v.value===0),C=c(()=>r.value>1),oe=z(U,null)!==null,ie=c(()=>C.value?"parent":"leaf"),ne=me(f,c(()=>V.value?I(ie.value,{parent:B.RestoreFocus,leaf:B.All&~B.FocusLock}):B.None),c(()=>({initialFocus:h(e.initialFocus),containers:F})));Ae(f,c(()=>C.value?V.value:!1)),Ee({type:"Dialog",element:f,onUpdate:(i,u,d)=>{if(u==="Dialog")return I(i,{[q.Add](){F.value.add(d),r.value+=1},[q.Remove](){F.value.delete(d),r.value-=1}})}});let re=De({name:"DialogDescription",slot:c(()=>({open:D.value}))}),se=`headlessui-dialog-${$()}`,E=h(null),y={titleId:E,panelRef:h(null),dialogState:v,setTitleId(i){E.value!==i&&(E.value=i)},close(){t("close",!1)}};te(U,y),Re(()=>{var i,u,d;return[...Array.from((u=(i=j.value)==null?void 0:i.querySelectorAll("body > *"))!=null?u:[]).filter(s=>!(!(s instanceof HTMLElement)||s.contains(ne.value)||y.panelRef.value&&s.contains(y.panelRef.value))),(d=y.panelRef.value)!=null?d:f.value]},(i,u)=>{v.value===0&&(C.value||(y.close(),he(()=>u==null?void 0:u.focus())))},$e.IgnoreScrollbars),ke((a=j.value)==null?void 0:a.defaultView,"keydown",i=>{i.key===ge.Escape&&v.value===0&&(C.value||(i.preventDefault(),i.stopPropagation(),y.close()))}),M(i=>{var u;if(v.value!==0||oe)return;let d=j.value;if(!d)return;let s=d==null?void 0:d.documentElement,g=(u=d.defaultView)!=null?u:window,T=s.style.overflow,de=s.style.paddingRight,pe=g.innerWidth-s.clientWidth;s.style.overflow="hidden",s.style.paddingRight=`${pe}px`,i(()=>{s.style.overflow=T,s.style.paddingRight=de})}),M(i=>{if(v.value!==0)return;let u=Se(f);if(!u)return;let d=new IntersectionObserver(s=>{for(let g of s)g.boundingClientRect.x===0&&g.boundingClientRect.y===0&&g.boundingClientRect.width===0&&g.boundingClientRect.height===0&&y.close()});d.observe(u),i(()=>d.disconnect())});function ue(i){i.stopPropagation()}return()=>{let i=P(p({},l),{ref:f,id:se,role:"dialog","aria-modal":v.value===0?!0:void 0,"aria-labelledby":E.value,"aria-describedby":re.value,onClick:ue}),T=e,{open:u,initialFocus:d}=T,s=G(T,["open","initialFocus"]),g={open:v.value===0};return S(L,{force:!0},()=>S(le,()=>S(ye,{target:f.value},()=>S(L,{force:!1},()=>R({props:p(p({},s),i),slot:g,attrs:l,slots:o,visible:v.value===0,features:_.RenderStrategy|_.Static,name:"Dialog"})))))}}}),Ye=k({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:l}){let o=A("DialogOverlay"),n=`headlessui-dialog-overlay-${$()}`;function a(r){r.target===r.currentTarget&&(r.preventDefault(),r.stopPropagation(),o.close())}return()=>R({props:P(p({},e),{id:n,"aria-hidden":!0,onClick:a}),slot:{open:o.dialogState.value===0},attrs:t,slots:l,name:"DialogOverlay"})}}),Ne=k({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(e,{attrs:t,slots:l,expose:o}){let n=A("DialogBackdrop"),a=`headlessui-dialog-backdrop-${$()}`,r=h(null);return o({el:r,$el:r}),H(()=>{if(n.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let w=e,D={id:a,ref:r,"aria-hidden":!0};return S(L,{force:!0},()=>S(le,()=>R({props:p(p(p({},t),w),D),slot:{open:n.dialogState.value===0},attrs:t,slots:l,name:"DialogBackdrop"})))}}}),Ge=k({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:l}){let o=A("DialogPanel"),n=`headlessui-dialog-panel-${$()}`;return()=>{let a={id:n,ref:o.panelRef};return R({props:p(p({},e),a),slot:{open:o.dialogState.value===0},attrs:t,slots:l,name:"DialogPanel"})}}}),_e=k({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(e,{attrs:t,slots:l}){let o=A("DialogTitle"),n=`headlessui-dialog-title-${$()}`;return H(()=>{o.setTitleId(n),ee(()=>o.setTitleId(null))}),()=>R({props:P(p({},e),{id:n}),slot:{open:o.dialogState.value===0},attrs:t,slots:l,name:"DialogTitle"})}}),Je=be;export{We as Dialog,Ne as DialogBackdrop,Je as DialogDescription,Ye as DialogOverlay,Ge as DialogPanel,_e as DialogTitle};
