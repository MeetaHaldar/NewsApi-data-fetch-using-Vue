var le=Object.defineProperty,ie=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var D=(e,t,n)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&D(e,n,t[n]);if(E)for(var n of E(t))q.call(t,n)&&D(e,n,t[n]);return e},g=(e,t)=>ie(e,oe(t));var z=(e,t)=>{var n={};for(var a in e)N.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&E)for(var a of E(e))t.indexOf(a)<0&&q.call(e,a)&&(n[a]=e[a]);return n};import{t as ue}from"./use-id-b6e0887a.mjs";import{m as se,h as v,u as T,k as K,R as fe}from"./render-04a01df5.mjs";import{transition as G,Reason as I}from"./transition-8ace8613.mjs";import{t as J}from"./dom-0d1fce75.mjs";import{f as de,c as ve,p as pe,l as L}from"./open-closed-5740cd5c.mjs";import{g as Q,s as H,k as V,h as b,i as B,m as c,n as W,l as C,w as me,p as x}from"./entry-fba3770b.mjs";function d(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let O=Symbol("TransitionContext");var he=(e=>(e.Visible="visible",e.Hidden="hidden",e))(he||{});function be(){return H(O,null)!==null}function ge(){let e=H(O,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function ce(){let e=H(U,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let U=Symbol("NestingContext");function F(e){return"children"in e?F(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function _(e){let t=b([]),n=b(!1);c(()=>n.value=!0),W(()=>n.value=!1);function a(l,r=v.Hidden){let i=t.value.findIndex(({id:o})=>o===l);i!==-1&&(T(r,{[v.Unmount](){t.value.splice(i,1)},[v.Hidden](){t.value[i].state="hidden"}}),!F(t)&&n.value&&(e==null||e()))}function p(l){let r=t.value.find(({id:i})=>i===l);return r?r.state!=="visible"&&(r.state="visible"):t.value.push({id:l,state:"visible"}),()=>a(l,v.Unmount)}return{children:t,register:p,unregister:a}}let P=se.RenderStrategy,ye=Q({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:a,expose:p}){if(!be()&&de())return()=>V(we,g(s({},e),{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave")}),a);let l=b(null),r=b("visible"),i=B(()=>e.unmount?v.Unmount:v.Hidden);p({el:l,$el:l});let{show:o,appear:A}=ge(),{register:y,unregister:m}=ce(),j={value:!0},h=ue(),S={value:!1},k=_(()=>{S.value||(r.value="hidden",m(h),t("afterLeave"))});c(()=>{let u=y(h);W(u)}),C(()=>{if(i.value===v.Hidden&&!!h){if(o&&r.value!=="visible"){r.value="visible";return}T(r.value,{hidden:()=>m(h),visible:()=>y(h)})}});let X=d(e.enter),Y=d(e.enterFrom),Z=d(e.enterTo),M=d(e.entered),ee=d(e.leave),te=d(e.leaveFrom),ne=d(e.leaveTo);c(()=>{C(()=>{if(r.value==="visible"){let u=J(l);if(u instanceof Comment&&u.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function re(u){let R=j.value&&!A.value,f=J(l);!f||!(f instanceof HTMLElement)||R||(S.value=!0,o.value&&t("beforeEnter"),o.value||t("beforeLeave"),u(o.value?G(f,X,Y,Z,M,w=>{S.value=!1,w===I.Finished&&t("afterEnter")}):G(f,ee,te,ne,M,w=>{S.value=!1,w===I.Finished&&(F(k)||(r.value="hidden",m(h),t("afterLeave")))})))}return c(()=>{me([o],(u,R,f)=>{re(f),j.value=!1},{immediate:!0})}),x(U,k),ve(B(()=>T(r.value,{visible:L.Open,hidden:L.Closed}))),()=>{let $=e,{appear:u,show:R,enter:f,enterFrom:w,enterTo:Ee,entered:Te,leave:Le,leaveFrom:Be,leaveTo:Ce}=$,ae=z($,["appear","show","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]);return K({props:g(s({},ae),{ref:l}),slot:{},slots:a,attrs:n,features:P,visible:r.value==="visible",name:"TransitionChild"})}}}),Se=ye,we=Q({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:a}){let p=pe(),l=B(()=>e.show===null&&p!==null?T(p.value,{[L.Open]:!0,[L.Closed]:!1}):e.show);C(()=>{if(![!0,!1].includes(l.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let r=b(l.value?"visible":"hidden"),i=_(()=>{r.value="hidden"}),o=b(!0),A={show:l,appear:B(()=>e.appear||!o.value)};return c(()=>{C(()=>{o.value=!1,l.value?r.value="visible":F(i)||(r.value="hidden")})}),x(U,i),x(O,A),()=>{let y=fe(e,["show","appear","unmount"]),m={unmount:e.unmount};return K({props:g(s({},m),{as:"template"}),slot:{},slots:g(s({},a),{default:()=>[V(Se,s(s(s({onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave")},n),m),y),a.default)]}),attrs:{},features:P,visible:r.value==="visible",name:"Transition"})}}});export{ye as TransitionChild,we as TransitionRoot};
